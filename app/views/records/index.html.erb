<h1 class='title'>入退館記録</h1>

<%= form_tag records_path, method: :post, class: 'record-form form-inline' do %>
  <div class="form-group">
    <%= select_tag :period_code, options_for_select(Period.codes.keys.to_a), prompt: '会員種別', class: 'form-control' %>
  </div>
  <div class='form-group'>
    <%= number_field_tag :paak_id, params[:paak_id], class: 'form-control', placeholder: '会員番号' %>
  </div>
  <div class='form-group'>
    <%= submit_tag :enter, class: 'btn btn-primary' %>
  </div>
  <div class='form-group'>
    <%= submit_tag :leave, class: 'btn btn-danger' %>
  </div>
<% end %>

<table class='table'>
  <thead>
    <tr>
      <th>期</th>
      <th>メンバー種別</th>
      <th>会員番号</th>
      <th>時間</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @records.each do |record| %>
      <tr>
        <td><%= record.membership.period.explanation %></td>
        <td><%= record.membership.period.code %></td>
        <td><%= record.membership.paak_id %></td>
        <td><%= record.timestamp.in_time_zone('Tokyo') %></td>
        <td class='record-code'>
          <% if record.code == 'enter' %>
            <span class='text-primary'>入館</span>
          <% elsif record.code == 'leave' %>
            <span class='text-danger'>退館</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
